# Test: File reading errors - fails when files don't exist
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-file-test
data:
  # Fails: Reading non-existent file with required
  {{- if .Values.testMissingFile }}
  fileContent: {{ required "File must exist" (.Files.Get "non-existent-file.txt") | quote }}
  {{- end }}
  # Fails: Glob with required match
  {{- if .Values.testGlobRequired }}
  {{- $files := .Files.Glob "non-existent-pattern-*.yaml" }}
  {{- if not $files }}
  error: {{ fail "No files matched the pattern" }}
  {{- end }}
  {{- end }}
  # Fails: AsConfig on empty glob result
  {{- if .Values.testAsConfigEmpty }}
  {{- $config := (.Files.Glob "missing/*.conf").AsConfig }}
  {{- if not $config }}
  error: {{ fail "No config files found" }}
  {{- end }}
  {{- end }}

